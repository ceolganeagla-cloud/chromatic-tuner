<!doctype html>
<html lang="en">
<head>
<!-- Favicon and App Icons -->
<link rel="icon" type="image/png" sizes="16x16" href="icons/icon-32.png?v=2">
<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32.png?v=2">
<link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png?v=2">
<link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png?v=2">
<link rel="apple-touch-icon" sizes="180x180" href="icons/icon-192.png?v=2">
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#000000">

<style>
:root{
  --bg:#0b1220; --panel:#0f172a; --card:#0c1324; --ink:#eaf2ff; --muted:#a4b0c0; --line:#1f2a44;
  --ok:#22c55e; --low:#ff8a1f; --high:#ef4444; --bar:#111a2e; --bar-edge:#1a2744; --glow:0 10px 30px rgba(0,0,0,.45);
}
*{box-sizing:border-box}

/* ====== SCREEN FIX ADDED ====== */
html,body{
  margin:0;
  padding:0;
  height:100%;
  background:var(--bg);
  color:var(--ink);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
  overflow:hidden;                 /* prevent scroll */
}
body{
  display:flex;
  flex-direction:column;
  height:100dvh;                   /* full visible height */
  height:100svh;
  min-height:100svh;
}
.wrap{
  flex:1;
  display:grid;
  grid-template-rows:auto auto auto auto 1fr auto;
  gap:12px;
  padding:14px;
  overflow:hidden;                 /* prevent content scroll */
}
/* ====== END SCREEN FIX ====== */

/* Your existing CSS below (unchanged) */
header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
h1{margin:0;font-size:clamp(18px,4.5vw,28px);letter-spacing:.3px}
.controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
button{
  appearance:none;border:1px solid var(--line);background:var(--panel);color:var(--ink);
  padding:10px 14px;border-radius:14px;font-weight:700;cursor:pointer;box-shadow:var(--glow)
}
button.toggle.start{background:#16a34a;color:white;border-color:#106c31}
button.toggle.stop{background:#b91c1c;color:white;border-color:#7f1212}
.badge{padding:8px 12px;border-radius:999px;background:var(--panel);border:1px solid var(--line);font-weight:700;color:var(--muted)}
.panel{background:var(--panel);border:1px solid var(--line);border-radius:18px;padding:12px;box-shadow:var(--glow)}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:space-between}
.brand{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.brand img.logo{height:42px;width:auto;border-radius:8px;display:block}
.flag{display:inline-grid;grid-template-columns:1fr 1fr 1fr;width:44px;height:28px;border-radius:4px;overflow:hidden;border:1px solid var(--line)}
.flag div:nth-child(1){background:#169B62}
.flag div:nth-child(2){background:white}
.flag div:nth-child(3){background:#FF883E}
.tray{display:flex;flex-wrap:wrap;gap:8px}
.instrument-btn{display:flex;align-items:center;gap:8px;padding:10px 12px;border-radius:14px;background:var(--card);border:1px solid var(--line);cursor:pointer;font-weight:800;color:var(--ink)}
.instrument-btn.active{outline:2px solid #3b82f6}
.instrument-btn.tuned{background:#0e2919;border-color:#1f8a4e}
.tuning-controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
select{
  appearance:none;border:1px solid var(--line);background:var(--card);color:var(--ink);
  padding:10px 12px;border-radius:12px;font-weight:700;box-shadow:var(--glow)
}
.tuning{display:flex;gap:8px;align-items:center;flex-wrap:wrap;color:var(--muted)}
.string-row{display:flex;gap:6px;flex-wrap:wrap}
.string-chip{padding:6px 10px;border:1px solid var(--line);background:var(--card);border-radius:999px;font-weight:800;color:var(--ink);min-width:44px;text-align:center}
.string-chip.active{outline:2px solid #3b82f6}
.string-chip.tuned{background:#0e2919;border-color:#1f8a4e}
.bar-wrap{display:grid;gap:12px}
.bar{position:relative;height:36px;border-radius:999px;background:var(--bar);border:1px solid var(--bar-edge);box-shadow:inset 0 0 0 1px rgba(255,255,255,.02),var(--glow);overflow:hidden}
.bar .zone.low{position:absolute;left:0;top:0;bottom:0;width:50%;background:linear-gradient(90deg,rgba(255,138,31,.18),rgba(255,138,31,0))}
.bar .zone.high{position:absolute;right:0;top:0;bottom:0;width:50%;background:linear-gradient(270deg,rgba(239,68,68,.18),rgba(239,68,68,0))}
.bar .zone.ok{position:absolute;left:50%;transform:translateX(-50%);top:0;bottom:0;width:12%;background:linear-gradient(90deg,rgba(34,197,94,.3),rgba(34,197,94,.0)60%)}
.pointer{position:absolute;top:50%;transform:translate(-50%,-50%);width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:18px solid #eaf2ff;filter:drop-shadow(0 4px 8px rgba(0,0,0,.6))}
.readout{display:grid;gap:6px;justify-items:center;text-align:center}
.note{font-size:clamp(28px,10vw,48px);font-weight:900;letter-spacing:1px}
.status{font-size:clamp(16px,4vw,22px);font-weight:900;padding:6px 12px;border-radius:12px;background:var(--card);border:1px solid var(--line);min-width:140px}
.status.low{color:var(--low);box-shadow:0 0 0 2px rgba(255,138,31,.15) inset}
.status.high{color:var(--high);box-shadow:0 0 0 2px rgba(239,68,68,.15) inset}
.status.ok{color:var(--ok);box-shadow:0 0 0 2px rgba(34,197,94,.15) inset}
.help{font-size:12px;color:var(--muted)}
.wrap.tuned{background:radial-gradient(1200px 400px at 50% -200px,rgba(34,197,94,.12),transparent 60%),var(--bg)}
footer{margin-top:8px;text-align:center;color:var(--muted);font-size:12px}
.error{color:#fca5a5;font-size:13px}
.meter{height:8px;border-radius:999px;background:#1f2a44;overflow:hidden;width:180px;border:1px solid var(--line)}
.meter>div{height:100%;width:0;background:#3b82f6;transition:width .08s linear}
.metro{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.metro .dots{display:flex;gap:6px}
.metro .dot{width:12px;height:12px;border-radius:50%;background:#2b3757;border:1px solid var(--line)}
.metro .dot.active{background:#eaf2ff}
.metro .dot.accent{background:#22c55e}
</style>
</head>

<body>
<div class="wrap" id="app">
  <!-- everything else from your original file (tuner + metronome) -->
</div>

<!-- === Full-screen script fix === -->
<script>
(function(){
  const app=document.getElementById('app');
  function setVh(){
    const h=(window.visualViewport?window.visualViewport.height:window.innerHeight);
    app.style.minHeight=h+'px';
  }
  setVh();
  window.addEventListener('resize',setVh);
  if(window.visualViewport)window.visualViewport.addEventListener('resize',setVh);
})();
</script>

<!-- === Your existing tuner + metronome JS (unchanged) === -->
<script src="your-existing-tuner-logic.js"></script>

<!-- register the service worker -->
<script>
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("./sw.js").catch(()=>{});
  });
}
</script>
</body>
</html>
